(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20ed2e1b"],{"0b9f":function(t,e,a){"use strict";a("42ce")},2423:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return i})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return s}));var r=a("b775");a("3fd3");function n(t){return Object(r["a"])({url:"/auth/article/saveOrUpdate",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/auth/article/query",method:"post",data:t})}function i(t,e){return Object(r["a"])({url:"/auth/article/review",method:"put",params:{id:t,status:e}})}function c(t){return Object(r["a"])({url:"/auth/article/queryById/"+t,method:"get"})}function l(){return Object(r["a"])({url:"/auth/article/getAll",method:"get"})}function s(t){return Object(r["a"])({url:"/auth/article/deleteByBatch/"+t,method:"delete"})}},"42ce":function(t,e,a){},c405:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return u}));var r=a("b775");function n(){return Object(r["a"])({url:"/auth/category/queryAllParent",method:"get"})}function o(t){return Object(r["a"])({url:"/auth/category/query",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/auth/category/save",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/auth/category/queryById/"+t,method:"get"})}function l(t){return Object(r["a"])({url:"/auth/category/update",method:"put",data:t})}function s(){return Object(r["a"])({url:"/auth/category/export",method:"get",responseType:"blob"})}function u(t){return Object(r["a"])({url:"/auth/category/deleteByBatch/"+t,method:"delete"})}},fbee:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入文章标题",maxlength:"30"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"栏目"}},[a("el-cascader",{ref:"cascader",attrs:{placeholder:"请选择栏目",options:t.categoryList,props:t.optionProps,"show-all-levels":!1},on:{change:t.handleChange},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否收费"}},[a("el-radio-group",{model:{value:t.form.charged,callback:function(e){t.$set(t.form,"charged",e)},expression:"form.charged"}},[a("el-radio",{attrs:{label:0,value:0}},[t._v("免费")]),a("el-radio",{attrs:{label:1,value:1}},[t._v("收费")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}}),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}}),a("el-col",{attrs:{span:3,offset:21}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.aId?"修改":"发布"))])],1)],1)],1),a("el-row",[a("editor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1)],1)},n=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("editor",{attrs:{init:t.init,disabled:t.disabled},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},i=[],c=a("c7eb"),l=a("1da1"),s=(a("caad"),a("2532"),a("e562")),u=a.n(s),d=a("ca72"),f=(a("fc39"),a("0d68"),a("4ea8"),a("3aea"),a("07d1"),a("84ec"),a("f557"),a("9434"),a("2d33"),a("34de"),a("0a9d"),a("64d8"),a("4237"),a("0902"),a("07d7"),a("2b07"),a("3154"),a("78e4"),a("62e5"),a("2fec"),a("855b"),a("0efa"),a("365e"),a("0335"),a("c3d7"),a("eda9"),a("4bd0"),a("8863"),a("ffbe"),a("7193"),a("bc3a")),p=a.n(f),h={components:{Editor:d["a"]},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr nonbreaking insertdatetime advlist lists wordcount imagetools textpattern autosave autoresize"},toolbar:{type:[String,Array],default:"code undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link codesample | alignleft aligncenter alignright alignjustify outdent indent formatpainter |     styleselect formatselect fontselect fontsizeselect | bullist numlist | blockquote subscript superscript removeformat |     table image media charmap hr pagebreak insertdatetime | fullscreen preview"}},data:function(){return{init:{menubar:!0,language_url:"/static/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"/static/tinymce/skins/ui/oxide",content_css:"../../static/tinymce/skins/content/default/content.css",height:770,min_height:770,max_height:770,toolbar_mode:"wrap",plugins:this.plugins,toolbar:this.toolbar,content_style:"p {margin: 5px 0;}",fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",branding:!1,images_upload_handler:this.uploadImage},content:this.value}},mounted:function(){u.a.init({})},methods:{uploadImage:function(t,e,a){var r=this;return Object(l["a"])(Object(c["a"])().mark((function n(){var o,i,l,s;return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,o=10,i=["image/jpeg","image/png"],!(t.blob().size/1024/1024>o)){n.next=6;break}return a("文件大小不能超过 ".concat(o," MB")),n.abrupt("return");case 6:if(i.includes(t.blob().type)){n.next=9;break}return a("不支持的文件类型"),n.abrupt("return");case 9:return l=new FormData,l.append("img",t.blob(),t.filename()),n.next=13,p.a.post("http://localhost:8989/auth/upload",l,{headers:{Authorization:"Bearer "+r.$store.getters.token,"Content-Type":"multipart/form-data"}});case 13:s=n.sent,s.data&&s.data?e(s.data.data):a("上传失败"),n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](0),a("上传出错");case 20:case"end":return n.stop()}}),n,null,[[0,17]])})))()}},watch:{value:function(t){this.content=t},content:function(t){this.$emit("input",t)}}},m=h,g=a("2877"),b=Object(g["a"])(m,o,i,!1,null,null,null),y=b.exports,v=a("c405"),k=a("2423"),x={name:"Edit",created:function(){this.getCategory(),this.aId=this.$route.query.aid,console.log(this.aId),this.getArticleDetail()},data:function(){return{optionProps:{value:"id",label:"name",children:"cates"},categoryList:[],selectedOptions:[],form:{title:"",content:"",charged:"",categoryId:[]},aId:-1}},methods:{getCategory:function(){var t=this;Object(v["d"])().then((function(e){t.categoryList=e.data}))},handleChange:function(t){console.log(t)},getArticleDetail:function(){var t=this;null!=this.aId&&Object(k["d"])(this.aId).then((function(e){t.form=e.data}))},handleSubmit:function(){var t=this;if(-1===this.aId){var e=this.form.categoryId.length;this.form.categoryId=this.form.categoryId[e-1],Object(k["a"])(this.form).then((function(e){t.$message({message:"资讯发布成功",type:"success"}),t.$router.push({path:"/article/article"})}))}else{var a=this.form.categoryId.length;this.form.categoryId=this.form.categoryId[a-1],Object(k["a"])(this.form).then((function(e){t.$message({message:"资讯更新成功",type:"success"}),t.$router.push({path:"/article/article"})}))}}},components:{Editor:y}},j=x,O=(a("0b9f"),Object(g["a"])(j,r,n,!1,null,"842b7444",null));e["default"]=O.exports}}]);